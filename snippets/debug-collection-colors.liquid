{%- comment -%}
  DEBUG: Metacampos de Cores da Cole√ß√£o
  Adicione este snippet na p√°gina do produto para ver o que est√° acontecendo
{%- endcomment -%}

<div style="background: #f0f0f0; border: 3px solid #ff0000; padding: 20px; margin: 20px 0; font-family: monospace; font-size: 12px;">
  <h3 style="color: #ff0000; margin-top: 0;">üîç DEBUG - Cores da Cole√ß√£o</h3>
  
  <div style="background: white; padding: 10px; margin: 10px 0; border-left: 4px solid #0066cc;">
    <strong>üì¶ PRODUTO:</strong> {{ product.title }}<br>
    <strong>ID:</strong> {{ product.id }}
  </div>

  <div style="background: white; padding: 10px; margin: 10px 0; border-left: 4px solid #9900cc;">
    <strong>üè∑Ô∏è COLE√á√ïES DO PRODUTO:</strong><br>
    {%- if product.collections.size > 0 -%}
      {%- for col in product.collections -%}
        ‚Ä¢ {{ col.title }} (ID: {{ col.id }})<br>
      {%- endfor -%}
    {%- else -%}
      ‚ùå Produto n√£o est√° em nenhuma cole√ß√£o!
    {%- endif -%}
  </div>

  <div style="background: white; padding: 10px; margin: 10px 0; border-left: 4px solid #cc6600;">
    <strong>üé® COLE√á√ÉO ATUAL (collection):</strong><br>
    {%- if collection -%}
      ‚Ä¢ Nome: {{ collection.title }}<br>
      ‚Ä¢ ID: {{ collection.id }}<br>
      ‚Ä¢ Handle: {{ collection.handle }}
    {%- else -%}
      ‚ùå Nenhuma cole√ß√£o atual (collection vazio)
    {%- endif -%}
  </div>

  <div style="background: white; padding: 10px; margin: 10px 0; border-left: 4px solid #00cc66;">
    <strong>üéØ METACAMPO DA COLE√á√ÉO ATUAL:</strong><br>
    {%- if collection -%}
      {%- if collection.metafields.custom.color_mapping.value != blank -%}
        ‚úÖ collection.metafields.custom.color_mapping.value:<br>
        <code style="background: #ffffcc; padding: 2px 5px;">{{ collection.metafields.custom.color_mapping.value }}</code>
      {%- elsif collection.metafields.custom.color_mapping != blank -%}
        ‚úÖ collection.metafields.custom.color_mapping:<br>
        <code style="background: #ffffcc; padding: 2px 5px;">{{ collection.metafields.custom.color_mapping }}</code>
      {%- else -%}
        ‚ùå Cole√ß√£o atual N√ÉO tem metacampo color_mapping
      {%- endif -%}
    {%- else -%}
      ‚ö†Ô∏è N√£o h√° cole√ß√£o atual para verificar
    {%- endif -%}
  </div>

  <div style="background: white; padding: 10px; margin: 10px 0; border-left: 4px solid #cc0066;">
    <strong>üîç METACAMPOS DE TODAS AS COLE√á√ïES:</strong><br>
    {%- if product.collections.size > 0 -%}
      {%- for col in product.collections -%}
        <div style="margin: 5px 0; padding: 5px; background: #f9f9f9;">
          <strong>{{ col.title }}:</strong><br>
          {%- if col.metafields.custom.color_mapping.value != blank -%}
            ‚úÖ .value: <code style="background: #ccffcc; padding: 2px 5px;">{{ col.metafields.custom.color_mapping.value }}</code>
          {%- elsif col.metafields.custom.color_mapping != blank -%}
            ‚úÖ direto: <code style="background: #ccffcc; padding: 2px 5px;">{{ col.metafields.custom.color_mapping }}</code>
          {%- else -%}
            ‚ùå Sem metacampo color_mapping
          {%- endif -%}
        </div>
      {%- endfor -%}
    {%- else -%}
      ‚ùå Produto n√£o tem cole√ß√µes
    {%- endif -%}
  </div>

  <div style="background: white; padding: 10px; margin: 10px 0; border-left: 4px solid #cc9900;">
    <strong>üìã METACAMPO DO PRODUTO:</strong><br>
    {%- if product.metafields.custom.color_mapping.value != blank -%}
      ‚úÖ product.metafields.custom.color_mapping.value:<br>
      <code style="background: #ffffcc; padding: 2px 5px;">{{ product.metafields.custom.color_mapping.value }}</code>
    {%- elsif product.metafields.custom.color_mapping != blank -%}
      ‚úÖ product.metafields.custom.color_mapping:<br>
      <code style="background: #ffffcc; padding: 2px 5px;">{{ product.metafields.custom.color_mapping }}</code>
    {%- else -%}
      ‚ö†Ô∏è Produto n√£o tem metacampo color_mapping pr√≥prio
    {%- endif -%}
  </div>

  <div style="background: white; padding: 10px; margin: 10px 0; border-left: 4px solid #6600cc;">
    <strong>üö´ IGNORAR CORES DA COLE√á√ÉO:</strong><br>
    {%- if product.metafields.custom.ignore_collection_colors == 'true' or product.metafields.custom.ignore_collection_colors == true -%}
      ‚ö†Ô∏è SIM - Produto est√° configurado para IGNORAR cores da cole√ß√£o
    {%- else -%}
      ‚úÖ N√ÉO - Produto pode usar cores da cole√ß√£o
    {%- endif -%}
  </div>

  <div style="background: white; padding: 10px; margin: 10px 0; border-left: 4px solid #cc0000;">
    <strong>üé® OP√á√ïES DE COR DO PRODUTO:</strong><br>
    {%- for option in product.options_with_values -%}
      {%- assign downcase_option = option.name | downcase -%}
      {%- if downcase_option contains 'cor' or downcase_option contains 'color' -%}
        <strong>Op√ß√£o: {{ option.name }}</strong><br>
        Valores:<br>
        {%- for value in option.values -%}
          ‚Ä¢ {{ value }}<br>
        {%- endfor -%}
      {%- endif -%}
    {%- endfor -%}
  </div>

  <div style="background: #ffffcc; padding: 10px; margin: 10px 0; border: 2px solid #cc9900;">
    <strong>üí° DIAGN√ìSTICO:</strong><br>
    {%- if product.collections.size == 0 -%}
      ‚ùå <strong>PROBLEMA:</strong> Produto n√£o est√° em nenhuma cole√ß√£o!<br>
      <strong>SOLU√á√ÉO:</strong> Adicione o produto a uma cole√ß√£o.
    {%- elsif product.metafields.custom.ignore_collection_colors == true -%}
      ‚ö†Ô∏è <strong>AVISO:</strong> Produto configurado para ignorar cores da cole√ß√£o.<br>
      <strong>SOLU√á√ÉO:</strong> Desmarque o metacampo "ignore_collection_colors".
    {%- else -%}
      {%- assign has_collection_colors = false -%}
      {%- for col in product.collections -%}
        {%- if col.metafields.custom.color_mapping != blank or col.metafields.custom.color_mapping.value != blank -%}
          {%- assign has_collection_colors = true -%}
          {%- break -%}
        {%- endif -%}
      {%- endfor -%}
      
      {%- if has_collection_colors -%}
        ‚úÖ <strong>OK:</strong> Produto tem cole√ß√µes com cores configuradas!<br>
        {%- if product.metafields.custom.color_mapping != blank -%}
          ‚ö†Ô∏è <strong>NOTA:</strong> Produto tamb√©m tem cores pr√≥prias (prioridade maior).
        {%- endif -%}
      {%- else -%}
        ‚ùå <strong>PROBLEMA:</strong> Nenhuma cole√ß√£o tem metacampo color_mapping!<br>
        <strong>SOLU√á√ÉO:</strong> Configure o metacampo nas cole√ß√µes.
      {%- endif -%}
    {%- endif -%}
  </div>

  <div style="background: #ffcccc; padding: 10px; margin: 10px 0;">
    <strong>‚ö†Ô∏è IMPORTANTE:</strong> Remova este snippet ap√≥s o debug!
  </div>
</div>
