{%- comment -%} BARRA DE PROGRESSO ATACADO â€” Cole no cart-drawer.liquid ou cart-items.liquid {%- endcomment -%}
{%- assign wholesale_min = 6 -%}
{%- comment -%} â†‘ Altere para a quantidade mÃ­nima configurada na ConectWhats {%- endcomment -%}
{%- assign total_items = cart.item_count -%}
{%- assign progress = total_items | times: 100 | divided_by: wholesale_min -%}
{%- if progress > 100 -%}
  {%- assign progress = 100 -%}
{%- endif -%}
{%- assign remaining = wholesale_min | minus: total_items -%}

<div class="cw-wholesale-progress" style="margin: 12px 0; padding: 10px 14px; background: linear-gradient(135deg, #FFFBEB, #FFF7ED); border: 1px solid #FDBA74; border-radius: 8px; font-family: inherit;">
  {%- if remaining > 0 -%}
    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 6px;">
      <span style="font-size: 12px; font-weight: 600; color: #92400E;">ğŸ›’ Faltam <strong style="color: #C2410C;">{{ remaining }}</strong> peÃ§a(s) para atacado!</span>
      <span style="font-size: 11px; color: #B45309;">{{ total_items }}/{{ wholesale_min }}</span>
    </div>
    <div style="width: 100%; height: 8px; background: #FDE68A; border-radius: 99px; overflow: hidden;">
      <div style="width: {{ progress }}%; height: 100%; background: linear-gradient(90deg, #F59E0B, #D97706); border-radius: 99px; transition: width 0.4s ease;"></div>
    </div>
    <p style="font-size: 10px; color: #92400E; margin: 4px 0 0; text-align: center;">Adicione mais itens e pague preÃ§o de atacado ğŸ’°</p>
  {%- else -%}
    <div style="display: flex; align-items: center; gap: 6px;">
      <span style="font-size: 18px;">ğŸ‰</span>
      <div>
        <p style="font-size: 13px; font-weight: 700; color: #15803D; margin: 0;">Atacado ativado!</p>
        <p style="font-size: 11px; color: #166534; margin: 2px 0 0;">VocÃª tem {{ total_items }} peÃ§as â€” preÃ§o especial aplicado.</p>
      </div>
    </div>
    <div style="width: 100%; height: 8px; background: #BBF7D0; border-radius: 99px; overflow: hidden; margin-top: 6px;">
      <div style="width: 100%; height: 100%; background: linear-gradient(90deg, #22C55E, #16A34A); border-radius: 99px;"></div>
    </div>
  {%- endif -%}
</div>
